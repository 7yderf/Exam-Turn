{"version":3,"file":"js/104.3da089a1.js","mappings":"uLAGQA,MAAM,U,GACDA,MAAM,gB,GACbC,EAAAA,EAAAA,GAAqD,MAAjDD,MAAM,sBAAqB,qBAAiB,G,GAC3CA,MAAM,wB,GAMRE,IAAI,SAASF,MAAM,cAAcG,GAAG,O,GAChCH,MAAM,sB,GACbC,EAAAA,EAAAA,GAA4C,MAAxCD,MAAM,sBAAqB,YAAQ,G,2EAX3CI,EAAAA,EAAAA,IAcO,OAdP,EAcO,EAbLH,EAAAA,EAAAA,GAOU,UAPV,EAOU,CANRI,GACAJ,EAAAA,EAAAA,GAIM,MAJN,EAIM,EAHJA,EAAAA,EAAAA,GAES,UAFDD,MAAM,mBAAoBM,QAAK,oBAAEC,EAAAA,aAAAA,EAAAA,eAAAA,KAAa,mCAK1DN,EAAAA,EAAAA,GAAqD,MAArD,EAAqD,WACrDA,EAAAA,EAAAA,GAGU,UAHV,EAGU,CAFRO,GACAC,EAAAA,EAAAA,IAAmFC,EAAA,CAApEC,YAAaJ,EAAAA,SAAWK,KAAM,SAAWC,OAAQN,EAAAA,iBAAhE,oC,gHAqBN,MAAMO,EAAU,0CAEhB,OACEC,KAAM,WACNC,WAAY,CACVC,aAAYA,EAAAA,GAEdC,QAEE,MAAMC,GAASjB,EAAAA,EAAAA,IAAI,MACbkB,EAAS,IAAIC,EAAAA,GAAO,CAAEC,OAAQR,IAC9BS,GAAMrB,EAAAA,EAAAA,MACNsB,GAAWtB,EAAAA,EAAAA,IAAI,IACfuB,GAAkBvB,EAAAA,EAAAA,IAAI,IACtBwB,GAAgBxB,EAAAA,EAAAA,IAAI,IAGpByB,EAAcC,UAClB,MAAMC,EAAM,gCACZ,IACE,MAAM,KAAEC,SAAeC,EAAAA,EAAAA,IAAeF,GAClCC,EAAKE,SACHF,EAAKA,KAAKG,OAAS,GACrBH,EAAKA,KAAKI,SAAQC,IACO,IAAnBA,EAAOC,UAAsC,IAApBD,EAAOE,WAClCC,YAAYC,KAAKJ,EACnB,IAINX,EAASgB,MAAQF,WAgGnB,CA/FE,MAAOG,GACPC,QAAQC,MAAMF,EAAU,QACxBjB,EAASgB,MAAQ,CACf,CACE,GAAM,EACN,KAAQ,mBACR,QAAW,qBACX,MAAS,KACT,cAAiB,KACjB,eAAkB,KAClB,aAAgB,KAChB,SAAY,WACZ,WAAc,WACd,KAAQ,KACR,SAAY,IAEd,CACE,GAAM,EACN,KAAQ,kBACR,QAAW,qBACX,MAAS,KACT,cAAiB,KACjB,eAAkB,KAClB,aAAgB,KAChB,SAAY,WACZ,WAAc,WACd,KAAQ,KACR,SAAY,IAEd,CACE,GAAM,EACN,KAAQ,gBACR,QAAW,qBACX,MAAS,KACT,cAAiB,KACjB,eAAkB,KAClB,aAAgB,KAChB,SAAY,WACZ,WAAc,WACd,KAAQ,KACR,SAAY,IAEd,CACE,GAAM,EACN,KAAQ,uBACR,QAAW,qBACX,MAAS,KACT,cAAiB,KACjB,eAAkB,KAClB,aAAgB,KAChB,SAAY,WACZ,WAAc,YACd,KAAQ,KACR,SAAY,IAEd,CACE,GAAM,EACN,KAAQ,iBACR,QAAW,qBACX,MAAS,KACT,cAAiB,KACjB,eAAkB,KAClB,aAAgB,KAChB,SAAY,UACZ,WAAc,YACd,KAAQ,KACR,SAAY,GAEd,CACE,GAAM,EACN,KAAQ,cACR,QAAW,qBACX,MAAS,KACT,cAAiB,KACjB,eAAkB,KAClB,aAAgB,KAChB,SAAY,WACZ,WAAc,YACd,KAAQ,KACR,SAAY,GAEd,CACE,GAAM,EACN,KAAQ,QACR,QAAW,qBACX,MAAS,KACT,cAAiB,KACjB,eAAkB,KAClB,aAAgB,KAChB,SAAY,WACZ,WAAc,YACd,KAAQ,KACR,SAAY,GAGlB,IAGFI,EAAAA,EAAAA,KAAUhB,gBAEFR,EAAOyB,OACbtB,EAAIiB,MAAQ,IAAIM,OAAOC,KAAKC,IAAI7B,EAAOqB,MAAO,CAC5CS,OAAQ,CAAEC,IAAK,UAAWC,KAAM,aAChCC,KAAM,UAGFzB,IAGNH,EAASgB,MAAMN,SAASC,IACtB,GAAIA,EAAOC,UAAYD,EAAOE,UAAW,CACvC,MAAMgB,EAAS,IAAIP,OAAOC,KAAKO,OAAO,CACpCC,SAAU,CACRL,IAAKM,WAAWrB,EAAOC,UACvBe,IAAKK,WAAWrB,EAAOE,YAEzBoB,MAAOtB,EAAOpB,KACdQ,IAAKA,EAAIiB,MACTkB,KAAM,CACJC,WAAY,IAAIb,OAAOC,KAAKa,KAAK,GAAI,IACrC/B,IAAKgC,KAITR,EAAOS,YAAY,SAAS,WAC1B,MAAMC,EAAaC,KAAKN,KAAK7B,IACvBoC,EAAeD,KAAKP,MAEtBM,GAAcF,GAChBG,KAAKE,QAAQ,CACXP,WAAY,IAAIb,OAAOC,KAAKa,KAAK,GAAI,IACrC/B,IAAKsC,IAEP1C,EAAgBe,MAAM4B,QAAQH,KAE9BD,KAAKE,QAAQ,CACXP,WAAY,IAAIb,OAAOC,KAAKa,KAAK,GAAI,IACrC/B,IAAKgC,IAEPpC,EAAgBe,MAAQf,EAAgBe,MAAM6B,QAC3ClC,GAAWA,GAAU8B,KAG1B,MAAMK,EAAoB9C,EAASgB,MAAM6B,QAAQlC,GAAWV,EAAgBe,MAAM+B,SAASpC,EAAOpB,QAC5FyD,EAAwBhD,EAASgB,MAAM6B,QAAQlC,IAAYV,EAAgBe,MAAM+B,SAASpC,EAAOpB,QACvGS,EAASgB,MAAQ,IAAI8B,KAAsBE,EAC5C,GAKH,IA1CF,IA6CF,MAAMC,EAAc,KAClBC,UAAUD,YAAYE,mBAAmBC,EAAUC,EAAnD,EAGID,EAAWhD,UACfc,QAAQoC,IAAIvB,GACZ,MAAM,SAAEnB,EAAF,UAAYC,GAAckB,EAASwB,OACzCxD,EAAIiB,MAAMwC,UAAU,CAAE9B,IAAKd,EAAUe,IAAKd,IAC1Cd,EAAIiB,MAAMyC,QAAQ,GAAlB,EAEIJ,EAAclC,IAClBD,QAAQoC,IAAInC,GACZuC,eAAe1C,OAAQ,CAAvB,EAGF,MAAO,CAAErB,SAAQsD,cAAajD,WAAUC,kBAAiBC,gBAC1D,G,QCxOH,MAAMyD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://vanguardia/./src/views/client/Agencias.vue","webpack://vanguardia/./src/views/client/Agencias.vue?7a4f"],"sourcesContent":["/* eslint-disable */\n<template>\n\n  <main class=\"agency\">\n    <article class=\"agency__hero\">\n      <h1 class=\"agency__hero-title\">Nuestras agencias</h1>\n      <div class=\"agency__hero-box-btn\">\n        <button class=\"agency__hero-btn\" @click=\"geolocation\">\n          Usar mi ubicación actual\n        </button>\n      </div>\n    </article>\n    <div ref=\"mapDiv\" class=\"agency__map\" id=\"map\"></div>\n    <article class=\"agency__card slide\">\n      <h2 class=\"agency__card-title\">Agencias</h2>\n      <CarouselHome :cardContent=\"agencies\" :type=\"'agency'\" :active=\"agencies_active\" />\n    </article>\n  </main>\n\n\n\n</template>\n\n<script>\n/* eslint-disable no-undef */\nimport { onMounted, ref, onUnmounted } from \"vue\";\n\n\nimport axios from \"axios\";\nimport { Loader } from \"@googlemaps/js-api-loader\";\nimport ApiService from \"@/core/services/ApiService\";\nimport CarouselHome from \"@/views/client/components/CarouselHome.vue\";\nimport \"@/assets/styles/views/Agency.scss\";\nimport market_select from \"@/assets/images/icons/icon-ubication.svg\";\nimport market from \"@/assets/images/icons/icon-ubication-select.svg\";\n\nconst API_KEY = \"AIzaSyACDXm5WBEngJZHLoEiSzzYCdlkg3THQmI\";\n\nexport default {\n  name: \"Agencias\",\n  components: {\n    CarouselHome\n  },\n  setup() {\n\n    const mapDiv = ref(null);\n    const loader = new Loader({ apiKey: API_KEY });\n    const map = ref();\n    const agencies = ref([]);\n    const agencies_active = ref([]);\n    const orderAgencies = ref([]);\n\n\n    const getAgencies = async () => {\n      const url = \"/api/vehicles/business-unitss\";\n      try {\n        const { data } = await ApiService.get(url);\n        if (data.success) {\n          if (data.data.length > 0) {\n            data.data.forEach(agency => {\n              if (agency.latitude != '' && agency.longitude != '') {\n                newAgencies.push(agency);\n              }\n            });\n          }\n        }\n        agencies.value = newAgencies;\n      } catch (response) {\n        console.error(response, \"aqui\");\n        agencies.value = [\n          {\n            \"id\": 6,\n            \"name\": \"Renault Américas\",\n            \"address\": \"domicilio conocido\",\n            \"phone\": null,\n            \"facebook_page\": null,\n            \"instagram_page\": null,\n            \"twitter_page\": null,\n            \"latitude\": 19.5464909,\n            \"longitude\": -99.1998606,\n            \"icon\": null,\n            \"vehicles\": 31\n          },\n          {\n            \"id\": 5,\n            \"name\": \"Kia Corregidora\",\n            \"address\": \"domicilio conocido\",\n            \"phone\": null,\n            \"facebook_page\": null,\n            \"instagram_page\": null,\n            \"twitter_page\": null,\n            \"latitude\": 19.2009271,\n            \"longitude\": -99.3521166,\n            \"icon\": null,\n            \"vehicles\": 19\n          },\n          {\n            \"id\": 1,\n            \"name\": \"Audi Galerías\",\n            \"address\": \"domicilio conocido\",\n            \"phone\": null,\n            \"facebook_page\": null,\n            \"instagram_page\": null,\n            \"twitter_page\": null,\n            \"latitude\": 19.0401541,\n            \"longitude\": -98.3364924,\n            \"icon\": null,\n            \"vehicles\": 11\n          },\n          {\n            \"id\": 3,\n            \"name\": \"Honda Gonzalez Gallo\",\n            \"address\": \"domicilio conocido\",\n            \"phone\": null,\n            \"facebook_page\": null,\n            \"instagram_page\": null,\n            \"twitter_page\": null,\n            \"latitude\": 20.6738686,\n            \"longitude\": -103.3704326,\n            \"icon\": null,\n            \"vehicles\": 11\n          },\n          {\n            \"id\": 2,\n            \"name\": \"Honda Galerias\",\n            \"address\": \"domicilio conocido\",\n            \"phone\": null,\n            \"facebook_page\": null,\n            \"instagram_page\": null,\n            \"twitter_page\": null,\n            \"latitude\": 21.025147,\n            \"longitude\": -101.2753897,\n            \"icon\": null,\n            \"vehicles\": 8\n          },\n          {\n            \"id\": 4,\n            \"name\": \"Kia Altaria\",\n            \"address\": \"domicilio conocido\",\n            \"phone\": null,\n            \"facebook_page\": null,\n            \"instagram_page\": null,\n            \"twitter_page\": null,\n            \"latitude\": 19.1539275,\n            \"longitude\": -103.0217916,\n            \"icon\": null,\n            \"vehicles\": 7\n          },\n          {\n            \"id\": 7,\n            \"name\": \"Acura\",\n            \"address\": \"domicilio conocido\",\n            \"phone\": null,\n            \"facebook_page\": null,\n            \"instagram_page\": null,\n            \"twitter_page\": null,\n            \"latitude\": 19.2401254,\n            \"longitude\": -103.7636272,\n            \"icon\": null,\n            \"vehicles\": 3\n          }\n        ];\n      }\n    };\n\n    onMounted(async () => {\n\n      await loader.load();\n      map.value = new google.maps.Map(mapDiv.value, {\n        center: { lat: 20.724671, lng: -103.3471888 },\n        zoom: 5,\n      });\n\n      await getAgencies();\n      \n\n      agencies.value.forEach((agency) => {\n        if (agency.latitude && agency.longitude) {\n          const marker = new google.maps.Marker({\n            position: {\n              lat: parseFloat(agency.latitude),\n              lng: parseFloat(agency.longitude),\n            },\n            title: agency.name,\n            map: map.value,\n            icon: {\n              scaledSize: new google.maps.Size(32, 32),\n              url: market,\n            },\n          });\n\n          marker.addListener(\"click\", function () {\n            const logoMarker = this.icon.url;\n            const agencyActive = this.title;\n\n            if (logoMarker == market) {\n              this.setIcon({\n                scaledSize: new google.maps.Size(32, 32),\n                url: market_select,\n              });\n              agencies_active.value.unshift(agencyActive);\n            } else {\n              this.setIcon({\n                scaledSize: new google.maps.Size(32, 32),\n                url: market,\n              });\n              agencies_active.value = agencies_active.value.filter(\n                (agency) => agency != agencyActive\n              );\n            }\n            const agencies_selected = agencies.value.filter((agency) => agencies_active.value.includes(agency.name));\n            const agencies_not_selected = agencies.value.filter((agency) => !agencies_active.value.includes(agency.name));\n            agencies.value = [...agencies_selected, ...agencies_not_selected];\n          });\n\n          //   marker.addListener(\"mouseout\", function() {\n          //     infowindow.close();\n          //   });\n        }\n      });\n    });\n    const geolocation = () => {\n      navigator.geolocation.getCurrentPosition(geoposOK, geoposFail);\n    }\n\n    const geoposOK = async (position) => {\n      console.log(position);\n      const { latitude, longitude } = position.coords;\n      map.value.setCenter({ lat: latitude, lng: longitude });\n      map.value.setZoom(10);\n    };\n    const geoposFail = (error) => {\n      console.log(error);\n      checkUbication.value = false;\n    };\n\n    return { mapDiv, geolocation, agencies, agencies_active, orderAgencies };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n","import { render } from \"./Agencias.vue?vue&type=template&id=6b456b60\"\nimport script from \"./Agencias.vue?vue&type=script&lang=js\"\nexport * from \"./Agencias.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/fre/projects/movi/front/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","ref","id","_createElementBlock","_hoisted_3","onClick","$setup","_hoisted_7","_createVNode","_component_CarouselHome","cardContent","type","active","API_KEY","name","components","CarouselHome","setup","mapDiv","loader","Loader","apiKey","map","agencies","agencies_active","orderAgencies","getAgencies","async","url","data","ApiService","success","length","forEach","agency","latitude","longitude","newAgencies","push","value","response","console","error","onMounted","load","google","maps","Map","center","lat","lng","zoom","marker","Marker","position","parseFloat","title","icon","scaledSize","Size","market","addListener","logoMarker","this","agencyActive","setIcon","market_select","unshift","filter","agencies_selected","includes","agencies_not_selected","geolocation","navigator","getCurrentPosition","geoposOK","geoposFail","log","coords","setCenter","setZoom","checkUbication","__exports__","render"],"sourceRoot":""}