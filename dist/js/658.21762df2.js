"use strict";(self["webpackChunkvanguardia"]=self["webpackChunkvanguardia"]||[]).push([[658],{2339:function(e,a,n){n.r(a),n.d(a,{default:function(){return C}});var t=n(3396);const c={class:"agency"},i={class:"agency__hero"},l=(0,t._)("h1",{class:"agency__hero-title"},"Nuestras agencias",-1),s={class:"agency__hero-box-btn"},o={ref:"mapDiv",class:"agency__map",id:"map"},u={class:"agency__cards slide"},r=(0,t._)("h2",{class:"agency__card-title"},"Agencias",-1);function g(e,a,n,g,v,d){const m=(0,t.up)("CarouselHome");return(0,t.wg)(),(0,t.iD)("main",c,[(0,t._)("article",i,[l,(0,t._)("div",s,[(0,t._)("button",{class:"agency__hero-btn",onClick:a[0]||(a[0]=(...e)=>g.geolocation&&g.geolocation(...e))}," Usar mi ubicaciÃ³n actual ")])]),(0,t._)("div",o,null,512),(0,t._)("article",u,[r,(0,t.Wm)(m,{class:"agency__card-box",cardContent:g.agencies,type:"agency",active:g.agencies_active},null,8,["cardContent","active"])])])}var v=n(4870),d=(n(6265),n(1528)),m=n(5977),p=n(7510),_=n(9614),h=n.p+"img/icon-ubication-select.50190378.svg";const y="AIzaSyACDXm5WBEngJZHLoEiSzzYCdlkg3THQmI";var f={name:"Agencias",components:{CarouselHome:p.Z},setup(){const e=(0,v.iH)(null),a=new d.aN({apiKey:y}),n=(0,v.iH)(),c=(0,v.iH)([]),i=(0,v.iH)([]),l=(0,v.iH)([]),s=async()=>{const e="/api/vehicles/business-units",a=[];try{const{data:n}=await m.Z.get(e);n.success&&n.data.length>0&&n.data.forEach((e=>{""!=e.latitude&&""!=e.longitude&&a.push(e)})),c.value=a,console.log("ðŸš€ ~ file: Agencias.vue ~ line 68 ~ getAgencies ~ agencies.value",c.value)}catch(n){console.error(n,"aqui")}};(0,t.bv)((async()=>{await a.load(),n.value=new google.maps.Map(e.value,{center:{lat:20.724671,lng:-103.3471888},zoom:5}),await s(),c.value.forEach((e=>{if(e.latitude&&e.longitude){const a=new google.maps.Marker({position:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},title:e.name,map:n.value,icon:{scaledSize:new google.maps.Size(32,32),url:h}});a.addListener("click",(function(){const e=this.icon.url,a=this.title;e==h?(this.setIcon({scaledSize:new google.maps.Size(32,32),url:_}),i.value.unshift(a)):(this.setIcon({scaledSize:new google.maps.Size(32,32),url:h}),i.value=i.value.filter((e=>e!=a)));const n=c.value.filter((e=>i.value.includes(e.name))),t=c.value.filter((e=>!i.value.includes(e.name)));c.value=[...n,...t]}))}}))}));const o=()=>{navigator.geolocation.getCurrentPosition(u,r)},u=async e=>{console.log(e);const{latitude:a,longitude:t}=e.coords;n.value.setCenter({lat:a,lng:t}),n.value.setZoom(10)},r=e=>{console.log(e),checkUbication.value=!1};return{mapDiv:e,geolocation:o,agencies:c,agencies_active:i,orderAgencies:l}}},b=n(89);const w=(0,b.Z)(f,[["render",g]]);var C=w}}]);
//# sourceMappingURL=658.21762df2.js.map