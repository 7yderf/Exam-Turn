{"version":3,"file":"js/825.87b5f662.js","mappings":"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","sources":["webpack://vanguardia/./src/views/client/Agencias.vue","webpack://vanguardia/./src/views/client/Agencias.vue?7a4f"],"sourcesContent":["/* eslint-disable */\r\n<template>\r\n\r\n  <main class=\"agency\">\r\n    <article class=\"agency__hero\">\r\n      <h1 class=\"agency__hero-title\">Nuestras agencias</h1>\r\n      <div class=\"agency__hero-box-btn\">\r\n        <button class=\"agency__hero-btn\" @click=\"geolocation\">\r\n          Usar mi ubicaci√≥n actual\r\n        </button>\r\n      </div>\r\n    </article>\r\n    <div ref=\"mapDiv\" class=\"agency__map\" id=\"map\"></div>\r\n    <article class=\"agency__cards slide\" >\r\n      <h2 class=\"agency__card-title\" >Agencias</h2>\r\n      <CarouselHome class=\"agency__card-box\"  :cardContent=\"agencies\" :type=\"'agency'\" :active=\"agencies_active\" />\r\n    </article>\r\n    <div class=\"agencies__cards-show\" ref=\"cards\"></div>\r\n  </main>\r\n  \r\n\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable no-undef */\r\nimport { onMounted, ref, onUnmounted } from \"vue\";\r\n\r\n\r\nimport axios from \"axios\";\r\nimport { Loader } from \"@googlemaps/js-api-loader\";\r\nimport ApiService from \"@/core/services/ApiService\";\r\nimport CarouselHome from \"@/views/client/components/CarouselHome.vue\";\r\nimport \"@/assets/styles/views/Agency.scss\";\r\nimport market_select from \"@/assets/images/icons/icon-ubication.svg\";\r\nimport market from \"@/assets/images/icons/icon-ubication-select.svg\";\r\n\r\nconst API_KEY = \"AIzaSyACDXm5WBEngJZHLoEiSzzYCdlkg3THQmI\";\r\n\r\nexport default {\r\n  name: \"Agencias\",\r\n  components: {\r\n    CarouselHome\r\n  },\r\n  setup() {\r\n\r\n    const mapDiv = ref(null);\r\n    const loader = new Loader({ apiKey: API_KEY });\r\n    const map = ref();\r\n    const agencies = ref([]);\r\n    const agencies_active = ref([]);\r\n    const orderAgencies = ref([]);\r\n    const cards = ref(null);\r\n\r\n\r\n    const getAgencies = async () => {\r\n      const url = \"/api/vehicles/business-units\";\r\n      const newAgencies = [];\r\n      try {\r\n        const { data } = await ApiService.get(url);\r\n        if (data.success) {\r\n          if (data.data.length > 0) {\r\n            data.data.forEach(agency => {\r\n              if (agency.latitude != '' && agency.longitude != '') {\r\n                newAgencies.push(agency);\r\n              }\r\n            });\r\n          }\r\n        }\r\n        agencies.value = newAgencies;\r\n        console.log(\"üöÄ ~ file: Agencias.vue ~ line 68 ~ getAgencies ~ agencies.value\", agencies.value)\r\n      } catch (response) {\r\n        console.error(response, \"aqui\");\r\n        // agencies.value = [\r\n        //   {\r\n        //     \"id\": 6,\r\n        //     \"name\": \"Renault Am√©ricas\",\r\n        //     \"address\": \"domicilio conocido\",\r\n        //     \"phone\": null,\r\n        //     \"facebook_page\": null,\r\n        //     \"instagram_page\": null,\r\n        //     \"twitter_page\": null,\r\n        //     \"latitude\": 19.5464909,\r\n        //     \"longitude\": -99.1998606,\r\n        //     \"icon\": null,\r\n        //     \"vehicles\": 31\r\n        //   },\r\n        //   {\r\n        //     \"id\": 5,\r\n        //     \"name\": \"Kia Corregidora\",\r\n        //     \"address\": \"domicilio conocido\",\r\n        //     \"phone\": null,\r\n        //     \"facebook_page\": null,\r\n        //     \"instagram_page\": null,\r\n        //     \"twitter_page\": null,\r\n        //     \"latitude\": 19.2009271,\r\n        //     \"longitude\": -99.3521166,\r\n        //     \"icon\": null,\r\n        //     \"vehicles\": 19\r\n        //   },\r\n        //   {\r\n        //     \"id\": 1,\r\n        //     \"name\": \"Audi Galer√≠as\",\r\n        //     \"address\": \"domicilio conocido\",\r\n        //     \"phone\": null,\r\n        //     \"facebook_page\": null,\r\n        //     \"instagram_page\": null,\r\n        //     \"twitter_page\": null,\r\n        //     \"latitude\": 19.0401541,\r\n        //     \"longitude\": -98.3364924,\r\n        //     \"icon\": null,\r\n        //     \"vehicles\": 11\r\n        //   },\r\n        //   {\r\n        //     \"id\": 3,\r\n        //     \"name\": \"Honda Gonzalez Gallo\",\r\n        //     \"address\": \"domicilio conocido\",\r\n        //     \"phone\": null,\r\n        //     \"facebook_page\": null,\r\n        //     \"instagram_page\": null,\r\n        //     \"twitter_page\": null,\r\n        //     \"latitude\": 20.6738686,\r\n        //     \"longitude\": -103.3704326,\r\n        //     \"icon\": null,\r\n        //     \"vehicles\": 11\r\n        //   },\r\n        //   {\r\n        //     \"id\": 2,\r\n        //     \"name\": \"Honda Galerias\",\r\n        //     \"address\": \"domicilio conocido\",\r\n        //     \"phone\": null,\r\n        //     \"facebook_page\": null,\r\n        //     \"instagram_page\": null,\r\n        //     \"twitter_page\": null,\r\n        //     \"latitude\": 21.025147,\r\n        //     \"longitude\": -101.2753897,\r\n        //     \"icon\": null,\r\n        //     \"vehicles\": 8\r\n        //   },\r\n        //   {\r\n        //     \"id\": 4,\r\n        //     \"name\": \"Kia Altaria\",\r\n        //     \"address\": \"domicilio conocido\",\r\n        //     \"phone\": null,\r\n        //     \"facebook_page\": null,\r\n        //     \"instagram_page\": null,\r\n        //     \"twitter_page\": null,\r\n        //     \"latitude\": 19.1539275,\r\n        //     \"longitude\": -103.0217916,\r\n        //     \"icon\": null,\r\n        //     \"vehicles\": 7\r\n        //   },\r\n        //   {\r\n        //     \"id\": 7,\r\n        //     \"name\": \"Acura\",\r\n        //     \"address\": \"domicilio conocido\",\r\n        //     \"phone\": null,\r\n        //     \"facebook_page\": null,\r\n        //     \"instagram_page\": null,\r\n        //     \"twitter_page\": null,\r\n        //     \"latitude\": 19.2401254,\r\n        //     \"longitude\": -103.7636272,\r\n        //     \"icon\": null,\r\n        //     \"vehicles\": 3\r\n        //   }\r\n        // ];\r\n      }\r\n    };\r\n\r\n    onMounted(async () => {\r\n\r\n      await loader.load();\r\n      map.value = new google.maps.Map(mapDiv.value, {\r\n        center: { lat: 20.724671, lng: -103.3471888 },\r\n        zoom: 5,\r\n      });\r\n\r\n      await getAgencies();\r\n      \r\n\r\n      agencies.value.forEach((agency) => {\r\n        if (agency.latitude && agency.longitude) {\r\n          const marker = new google.maps.Marker({\r\n            position: {\r\n              lat: parseFloat(agency.latitude),\r\n              lng: parseFloat(agency.longitude),\r\n            },\r\n            title: agency.name,\r\n            map: map.value,\r\n            icon: {\r\n              scaledSize: new google.maps.Size(32, 32),\r\n              url: market,\r\n            },\r\n          });\r\n\r\n          marker.addListener(\"click\", function () {\r\n            const logoMarker = this.icon.url;\r\n            const agencyActive = this.title;\r\n\r\n            if (logoMarker == market) {\r\n              this.setIcon({\r\n                scaledSize: new google.maps.Size(32, 32),\r\n                url: market_select,\r\n              });\r\n              agencies_active.value.unshift(agencyActive);\r\n              console.log(cards.value);\r\n              cards.value.scrollIntoView({behavior: \"smooth\", block: \"end\", inline: \"nearest\"})\r\n              \r\n            } else {\r\n              this.setIcon({\r\n                scaledSize: new google.maps.Size(32, 32),\r\n                url: market,\r\n              });\r\n              agencies_active.value = agencies_active.value.filter(\r\n                (agency) => agency != agencyActive\r\n              );\r\n            }\r\n            const agencies_selected = agencies.value.filter((agency) => agencies_active.value.includes(agency.name));\r\n            const agencies_not_selected = agencies.value.filter((agency) => !agencies_active.value.includes(agency.name));\r\n            agencies.value = [...agencies_selected, ...agencies_not_selected];\r\n          });\r\n\r\n          //   marker.addListener(\"mouseout\", function() {\r\n          //     infowindow.close();\r\n          //   });\r\n        }\r\n      });\r\n    });\r\n    const geolocation = () => {\r\n      navigator.geolocation.getCurrentPosition(geoposOK, geoposFail);\r\n    }\r\n\r\n    const geoposOK = async (position) => {\r\n      console.log(position);\r\n      const { latitude, longitude } = position.coords;\r\n      map.value.setCenter({ lat: latitude, lng: longitude });\r\n      map.value.setZoom(10);\r\n    };\r\n    const geoposFail = (error) => {\r\n      console.log(error);\r\n      checkUbication.value = false;\r\n    };\r\n\r\n    return { mapDiv, geolocation, agencies, agencies_active, orderAgencies, cards };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n","import { render } from \"./Agencias.vue?vue&type=template&id=17da792d\"\nimport script from \"./Agencias.vue?vue&type=script&lang=js\"\nexport * from \"./Agencias.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\FREDY\\\\Desktop\\\\turn\\\\front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","ref","id","_createElementBlock","_hoisted_3","onClick","$setup","_hoisted_7","_createVNode","_component_CarouselHome","cardContent","type","active","API_KEY","name","components","CarouselHome","setup","mapDiv","loader","Loader","apiKey","map","agencies","agencies_active","orderAgencies","cards","getAgencies","async","url","newAgencies","data","ApiService","success","length","forEach","agency","latitude","longitude","push","value","console","log","response","error","onMounted","load","google","maps","Map","center","lat","lng","zoom","marker","Marker","position","parseFloat","title","icon","scaledSize","Size","market","addListener","logoMarker","this","agencyActive","setIcon","market_select","unshift","scrollIntoView","behavior","block","inline","filter","agencies_selected","includes","agencies_not_selected","geolocation","navigator","getCurrentPosition","geoposOK","geoposFail","coords","setCenter","setZoom","checkUbication","__exports__","render"],"sourceRoot":""}