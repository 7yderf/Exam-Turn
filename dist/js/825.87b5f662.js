"use strict";(self["webpackChunkvanguardia"]=self["webpackChunkvanguardia"]||[]).push([[825],{8329:function(e,a,n){n.r(a),n.d(a,{default:function(){return k}});var l=n(3396);const c={class:"agency"},s={class:"agency__hero"},i=(0,l._)("h1",{class:"agency__hero-title"},"Nuestras agencias",-1),t={class:"agency__hero-box-btn"},o={ref:"mapDiv",class:"agency__map",id:"map"},u={class:"agency__cards slide"},r=(0,l._)("h2",{class:"agency__card-title"},"Agencias",-1),g={class:"agencies__cards-show",ref:"cards"};function d(e,a,n,d,v,_){const m=(0,l.up)("CarouselHome");return(0,l.wg)(),(0,l.iD)("main",c,[(0,l._)("article",s,[i,(0,l._)("div",t,[(0,l._)("button",{class:"agency__hero-btn",onClick:a[0]||(a[0]=(...e)=>d.geolocation&&d.geolocation(...e))}," Usar mi ubicaciÃ³n actual ")])]),(0,l._)("div",o,null,512),(0,l._)("article",u,[r,(0,l.Wm)(m,{class:"agency__card-box",cardContent:d.agencies,type:"agency",active:d.agencies_active},null,8,["cardContent","active"])]),(0,l._)("div",g,null,512)])}var v=n(4870),_=(n(6265),n(1528)),m=n(5977),p=n(7510),h=n(9614),f=n.p+"img/icon-ubication-select.50190378.svg";const y="AIzaSyACDXm5WBEngJZHLoEiSzzYCdlkg3THQmI";var b={name:"Agencias",components:{CarouselHome:p.Z},setup(){const e=(0,v.iH)(null),a=new _.aN({apiKey:y}),n=(0,v.iH)(),c=(0,v.iH)([]),s=(0,v.iH)([]),i=(0,v.iH)([]),t=(0,v.iH)(null),o=async()=>{const e="/api/vehicles/business-units",a=[];try{const{data:n}=await m.Z.get(e);n.success&&n.data.length>0&&n.data.forEach((e=>{""!=e.latitude&&""!=e.longitude&&a.push(e)})),c.value=a,console.log("ðŸš€ ~ file: Agencias.vue ~ line 68 ~ getAgencies ~ agencies.value",c.value)}catch(n){console.error(n,"aqui")}};(0,l.bv)((async()=>{await a.load(),n.value=new google.maps.Map(e.value,{center:{lat:20.724671,lng:-103.3471888},zoom:5}),await o(),c.value.forEach((e=>{if(e.latitude&&e.longitude){const a=new google.maps.Marker({position:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},title:e.name,map:n.value,icon:{scaledSize:new google.maps.Size(32,32),url:f}});a.addListener("click",(function(){const e=this.icon.url,a=this.title;e==f?(this.setIcon({scaledSize:new google.maps.Size(32,32),url:h}),s.value.unshift(a),console.log(t.value),t.value.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})):(this.setIcon({scaledSize:new google.maps.Size(32,32),url:f}),s.value=s.value.filter((e=>e!=a)));const n=c.value.filter((e=>s.value.includes(e.name))),l=c.value.filter((e=>!s.value.includes(e.name)));c.value=[...n,...l]}))}}))}));const u=()=>{navigator.geolocation.getCurrentPosition(r,g)},r=async e=>{console.log(e);const{latitude:a,longitude:l}=e.coords;n.value.setCenter({lat:a,lng:l}),n.value.setZoom(10)},g=e=>{console.log(e),checkUbication.value=!1};return{mapDiv:e,geolocation:u,agencies:c,agencies_active:s,orderAgencies:i,cards:t}}},w=n(89);const C=(0,w.Z)(b,[["render",d]]);var k=C}}]);
//# sourceMappingURL=825.87b5f662.js.map