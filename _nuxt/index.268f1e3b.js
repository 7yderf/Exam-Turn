import{_ as G}from"./BackgroundSrc.e5dc4fd7.js";import N from"./Icon.3bd902a4.js";import{_ as K}from"./object.63153a22.js";import{u as Z,a as ee,_ as te}from"./FiltersForm.0cc28538.js";import{k as $,U as se,V as oe,W as ae,X as O,a as T,o as i,b as f,j as e,h as y,y as A,z as H,E as ne,Y as re,B as w,A as k,C as ce,l as _e,p as ie,J as le,u as r,t as h,F as pe,i as de,c as ue}from"./entry.d136d2c8.js";import{_ as L}from"./_plugin-vue_export-helper.c27b6911.js";import{u as fe}from"./useLoading.f821adc3.js";import{u as ye}from"./FiltersBrok.a9222126.js";import"./config.d7e2003d.js";import"./Slider.782cf4e1.js";import"./swiper-slide.40ce1545.js";import"./pagination.dcfcdf6a.js";import"./nuxt-link.ee7ce6ab.js";const me=(a,t)=>{const o=$({});return se(()=>{const l=oe(a),{title:_,titleTemplate:m,...p}=l;o.value={title:_,titleTemplate:m,meta:ae(p)}}),O(o,t)},M=a=>(A("data-v-c385e1ab"),a=a(),H(),a),ve={class:"drawer offcanvas-header"},be={class:"drawer__header"},he=M(()=>e("h5",null,"Buscar propiedades",-1)),ge=M(()=>e("span",{class:"drawer__filter-text drawer__btn-filter--txt-filter"},"Limpiar",-1)),xe=T({__name:"Header",setup(a){const t=Z(),o=ee(),l=()=>{t.value=!t.value},_=()=>{o.value=!o.value};return(m,p)=>{const d=N;return i(),f("section",ve,[e("header",be,[he,e("button",{type:"button",class:"drawer__btn-filter",onClick:_},[y(d,{name:"tdesign:clear-formatting",class:"drawer__btn-icon"}),ge])]),e("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:l})])}}});const we=L(xe,[["__scopeId","data-v-c385e1ab"]]),C=a=>(A("data-v-6a933ec6"),a=a(),H(),a),ke={class:"body"},$e={class:"property"},Ce={class:"w-100 property__hero"},Pe=C(()=>e("section",{class:"property__hero-section"},[e("h4",null,"Propiedades")],-1)),Se={class:"w-100 property__body-search"},Re={key:0,class:"container property__body"},Ie={class:"box property__propertys-tit"},Be=C(()=>e("span",{class:"property__filter-text property__btn-filter--txt-filter"},"Filtrar",-1)),Fe={class:"box property__propertys"},qe={class:"box property__paginate"},Ne=["disabled"],Oe={class:"property__pag-actuality"},Te=["disabled"],Ae={key:1,class:"container property__body property__body--loading"},He=C(()=>e("span",{class:"loader"},null,-1)),Le=[He],Me={class:"offcanvas-body p-0"},Qe=T({__name:"index",async setup(a){let t,o;const l=fe(),_=$(!1),{$bootstrap:m}=ne(),p=$("");let d;const Q=()=>{d.toggle()},P=re(),{query:g,path:D}=w(),S=ye(),{getProperties:v,splitRanges:E,stringToArray:J,setOffset:R,setPaginate:I}=S,B=async s=>{let n=s;return n=await E(s),n=J(n,{propertyTypes:"property_types"}),n};if(JSON.stringify(w().query)!=="{}"){const s=([t,o]=k(()=>B(g)),t=await t,o(),t);[t,o]=k(()=>v(s)),await t,o()}else[t,o]=k(()=>v({})),await t,o();const{filters:u,getProductsList:F,offset:c,total:b}=ce(S),V=_e(()=>F.value.length>0&&D==="/property"?F.value:[]),q=async s=>{s==="next"&&(R(c.value+20),I(u.value.page+1)),s==="prev"&&(R(c.value-20),I(u.value.page-1)),s==="next"&&c.value<b.value?P.replace({query:{...g,page:u.value.page}}):s==="prev"&&c.value>=0&&P.replace({query:{...g,page:u.value.page}})};return ie(async()=>{d=new m.Offcanvas(p.value),setTimeout(()=>{_.value=!0},100)}),le(()=>w().query,async s=>{if(JSON.stringify(s)!=="{}"){d.hide();const n=await B(s);await v(n)}else await v({})}),O({title:"Propiedades",link:[{rel:"canonical",href:""}]}),me({title:"Propiedades"}),(s,n)=>{const z=G,U=N,j=K,W=we,X=te;return i(),f("div",ke,[e("main",$e,[e("article",Ce,[y(z,{"img-src":"/backgrounds/header.png"},null,8,["img-src"]),Pe]),e("article",Se,[!r(l)&&r(_)?(i(),f("section",Re,[e("div",Ie,[e("h5",null,h(`${r(b)} Propiedades en la busqueda`),1),e("button",{type:"button",class:"property__btn-filter",onClick:Q},[y(U,{name:"ri:equalizer-fill",class:"property__btn-icon"}),Be])]),e("div",Fe,[(i(!0),f(pe,null,de(r(V),(x,Y)=>(i(),ue(j,{key:Y,property:x},null,8,["property"]))),128))]),e("div",qe,[e("button",{type:"button",disabled:r(c)===0,onClick:n[0]||(n[0]=x=>q("prev"))},h("<< Regresar"),8,Ne),e("div",Oe,[e("span",null,h(`${r(c)+1} - ${r(c)+r(u).limit} de ${r(b)}`),1)]),e("button",{type:"button",disabled:r(c)+20>r(b),onClick:n[1]||(n[1]=x=>q("next"))},h("Siguiente >>"),8,Te)])])):(i(),f("section",Ae,Le))])]),e("div",{id:"offcanvasRight",ref_key:"offcanvasRight",ref:p,class:"offcanvas offcanvas-end",tabindex:"-1","aria-labelledby":"offcanvasRightLabel"},[y(W),e("div",Me,[y(X)])],512)])}}});const et=L(Qe,[["__scopeId","data-v-6a933ec6"]]);export{et as default};
